<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulador de Ahorro Mensual</title>
  <link rel="icon" type="image/png" href="granadilla_icon.png">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #222;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
    }
    header {
      background-color: #444;
      padding: 20px;
    }
    nav button {
      margin: 5px;
      padding: 10px 20px;
      background-color: orange;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    section {
      display: none;
      padding: 20px;
    }
    table {
      margin: 20px auto;
      border-collapse: collapse;
      background-color: #333;
      width: 90%;
    }
    th, td {
      border: 1px solid white;
      padding: 8px;
    }
    input {
      padding: 5px;
      margin: 5px;
    }
  </style>
</head>
<body>

<header>
  <h1>Simulador de Ahorro Mensual</h1>
  <p>Realizado por: Angie Martínez, Dylan Tirado, Ismael Cadena, Dimar Pon</p>
</header>

<nav>
  <button onclick="mostrarSeccion('registro')">Registrar</button>
  <button onclick="mostrarSeccion('tabla')">Ver Tabla</button>
  <button onclick="mostrarSeccion('graficas')">Gráficas</button>
</nav>

<section id="seccionRegistro">
  <h2>Registro Mensual</h2>
  <label>Mes:</label>
  <input type="text" id="mes"><br>
  <label>Ingreso:</label>
  <input type="number" id="ingreso"><br>
  <label>Gastos:</label>
  <input type="number" id="gastos"><br>
  <button onclick="registrarDatos()">Guardar</button>
  <p id="mensaje" style="color: lightgreen;"></p>
</section>

<section id="seccionTabla">
  <h2>Tabla de Ahorros</h2>
  <table id="tablaAhorros">
    <tr>
      <th>Mes</th>
      <th>Ingreso</th>
      <th>Gastos</th>
      <th>Ahorro</th>
    </tr>
  </table>
</section>

<section id="seccionGraficas">
  <h2>Gráficas</h2>
  <h3>Gráfico de Ahorro Mensual</h3>
  <canvas id="graficoAhorro" width="400" height="200"></canvas>

  <h3>Gastos vs Ahorro (último mes)</h3>
  <canvas id="graficoGastosAhorro" width="400" height="200"></canvas>
</section>

<script>
  const registrosMensuales = [];

  function mostrarSeccion(seccion) {
    document.getElementById('seccionRegistro').style.display = 'none';
    document.getElementById('seccionTabla').style.display = 'none';
    document.getElementById('seccionGraficas').style.display = 'none';
    document.getElementById('seccion' + capitalizar(seccion)).style.display = 'block';
    if (seccion === 'tabla') generarTabla();
    if (seccion === 'graficas') mostrarGraficas();
  }

  function capitalizar(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  }

  function registrarDatos() {
    const mes = document.getElementById('mes').value;
    const ingreso = parseFloat(document.getElementById('ingreso').value);
    const gastos = parseFloat(document.getElementById('gastos').value);
    const ahorro = ingreso - gastos;

    if (!mes || isNaN(ingreso) || isNaN(gastos)) {
      document.getElementById('mensaje').textContent = "Por favor, completa todos los campos correctamente.";
      return;
    }

    registrosMensuales.push({ mes, ingreso, totalGastos: gastos, ahorro });

    document.getElementById('mensaje').textContent = "Datos guardados correctamente.";
    document.getElementById('mes').value = '';
    document.getElementById('ingreso').value = '';
    document.getElementById('gastos').value = '';
  }

  function generarTabla() {
    const tabla = document.getElementById('tablaAhorros');
    tabla.innerHTML = `
      <tr>
        <th>Mes</th>
        <th>Ingreso</th>
        <th>Gastos</th>
        <th>Ahorro</th>
      </tr>
    `;

    registrosMensuales.forEach(reg => {
      tabla.innerHTML += `
        <tr>
          <td>${reg.mes}</td>
          <td>$${reg.ingreso.toFixed(2)}</td>
          <td>$${reg.totalGastos.toFixed(2)}</td>
          <td>$${reg.ahorro.toFixed(2)}</td>
        </tr>
      `;
    });
  }

  function mostrarGraficas() {
    const ahorroCanvas = document.getElementById('graficoAhorro');
    const pastelCanvas = document.getElementById('graficoGastosAhorro');

    // Destruir gráficas anteriores si existen
    Chart.getChart(ahorroCanvas)?.destroy();
    Chart.getChart(pastelCanvas)?.destroy();

    // Gráfico de barras
    const etiquetas = registrosMensuales.map(r => r.mes);
    const datosAhorro = registrosMensuales.map(r => r.ahorro);

    new Chart(ahorroCanvas, {
      type: 'bar',
      data: {
        labels: etiquetas,
        datasets: [{
          label: 'Ahorro mensual',
          data: datosAhorro,
          backgroundColor: 'lightgreen',
          borderColor: 'green',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: { beginAtZero: true }
        }
      }
    });

    // Gráfico de pastel
    if (registrosMensuales.length > 0) {
      const ultimo = registrosMensuales[registrosMensuales.length - 1];
      new Chart(pastelCanvas, {
        type: 'pie',
        data: {
          labels: ['Gastos', 'Ahorro'],
          datasets: [{
            data: [ultimo.totalGastos, ultimo.ahorro],
            backgroundColor: ['#ff3333', '#00cc66']
          }]
        }
      });
    }
  }

  mostrarSeccion('registro');
</script>

</body>
</html>



